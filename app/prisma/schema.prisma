generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This table contains exclusion constraints and requires additional setup for migrations. Visit https://pris.ly/d/exclusion-constraints for more info.
model appointments {
  id                                    BigInt   @id @default(autoincrement())
  customer_id                           BigInt
  staff_id                              BigInt
  starts_at                             DateTime @db.Timestamptz(6)
  ends_at                               DateTime @db.Timestamptz(6)
  status                                String   @default("pending")
  created_at                            DateTime @default(now()) @db.Timestamptz(6)
  users_appointments_customer_idTousers users    @relation("appointments_customer_idTousers", fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_appointments_staff_idTousers    users    @relation("appointments_staff_idTousers", fields: [staff_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model staff {
  user_id   BigInt    @id
  specialty String
  title     String?
  bio       String?
  mon_start DateTime? @db.Time(6)
  mon_end   DateTime? @db.Time(6)
  tue_start DateTime? @db.Time(6)
  tue_end   DateTime? @db.Time(6)
  wed_start DateTime? @db.Time(6)
  wed_end   DateTime? @db.Time(6)
  thu_start DateTime? @db.Time(6)
  thu_end   DateTime? @db.Time(6)
  fri_start DateTime? @db.Time(6)
  fri_end   DateTime? @db.Time(6)
  sat_start DateTime? @db.Time(6)
  sat_end   DateTime? @db.Time(6)
  sun_start DateTime? @db.Time(6)
  sun_end   DateTime? @db.Time(6)
  users     users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model users {
  id                                           BigInt         @id @default(autoincrement())
  email                                        String         @unique
  full_name                                    String
  role                                         String         @default("user")
  created_at                                   DateTime       @default(now()) @db.Timestamptz(6)
  password_hash                                String
  appointments_appointments_customer_idTousers appointments[] @relation("appointments_customer_idTousers")
  appointments_appointments_staff_idTousers    appointments[] @relation("appointments_staff_idTousers")
  staff                                        staff?
}
